---
import Layout from './Layout.astro';
import '../styles/post.css';  // ← pulls in your global styles
const {
  title,
  description,
  writer,
  rating: { overall: ratingValue } = {},
  pubDate,
} = Astro.props.frontmatter;

// Build a Product schema embedding your Review
const jsonLdProduct = {
  "@context": "https://schema.org",
  "@type": "Product",
  "name": title,
  "description": description,
  "review": {
    "@type": "Review",
    "author": {
      "@type": "Person",
      "name": writer
    },
    "datePublished": pubDate,
    "reviewBody": description,
    "reviewRating": {
      "@type": "Rating",
      "ratingValue": ratingValue,
      "bestRating": "10",
      "worstRating": "1"
    }
  }
};
---

<head>
  <title>{title}</title>
  <meta name="description" content={description} />
  <!-- JSON-LD markup for Google rich snippets -->
  <!-- Force‐inject raw JSON via set:html -->
  <script
    type="application/ld+json"
    set:html={JSON.stringify(jsonLdProduct, null, 2)}
  ></script>
</head>

<Layout title={title}>
  <article class="post container centered_flex">
    <slot />
  </article>
</Layout>