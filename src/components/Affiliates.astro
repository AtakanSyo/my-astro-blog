---
// src/components/Affiliates.astro
import { Icon } from 'astro-icon/components';

export interface Props {
  affiliate: {
    amazon?: string;
    highpointscientific?: string;
    astroshop?: string;
  };
}

const { affiliate } = Astro.props as Props;

// detect language from URL
const isTr = Astro.url.pathname.startsWith('/tr');

const labels = {
  title: isTr ? 'Satın Alınabilecek Mağazalar' : 'Available at These Vendors',
  amazon: {
    name: isTr ? 'Amazon' : 'Amazon',
    sub: isTr ? 'Geniş ürün yelpazesi' : 'Huge marketplace',
    desc: isTr
      ? 'Küçük ve orta ölçekli alışverişler için önerilir.'
      : 'Recommended for smaller purchases.',
    button: isTr ? 'Fiyatı kontrol et ↗' : 'Check price ↗'
  },
  highpoint: {
    name: isTr ? 'HighPoint Scientific' : 'HighPoint Scientific',
    sub: isTr ? 'Astronomi odaklı mağaza' : 'Astronomy-focused store',
    desc: isTr
      ? 'Mükemmel müşteri desteği ve uzman rehberliği sunar.'
      : 'Great customer support & expert guidance.',
    button: isTr ? 'Fiyatı kontrol et ↗' : 'Check price ↗'
  },
  astroshop: {
    name: isTr ? 'AstroShop' : 'AstroShop',
    sub: isTr ? 'Avrupa' : 'Europe',
    desc: isTr
      ? 'Avrupa’daki müşteriler için önerilir.'
      : 'Recommended for EU customers.',
    button: isTr ? 'Fiyatı kontrol et ↗' : 'Check price ↗'
  }
};

// check if we have at least one affiliate
const hasAffiliate =
  affiliate.amazon ||
  affiliate.highpointscientific ||
  affiliate.astroshop;
---

{hasAffiliate && (
<section class="affiliate-section centered_flex">

  <h3 class="affiliate-section-title">{labels.title}</h3>

  <ul class="affiliate-vendors">

    {affiliate.amazon && (
      <li class="vendor-card">

        <div class="vendor-info">
          <h4 class="vendor-name">{labels.amazon.name}</h4>
          <span class="vendor-label">{labels.amazon.sub}</span>
          <p class="vendor-desc">{labels.amazon.desc}</p>
        </div>

        <a
          href={affiliate.amazon}
          target="_blank"
          rel="noopener noreferrer"
          class="vendor-button"
        >
          {labels.amazon.button}
        </a>
      </li>
    )}

    {affiliate.highpointscientific && (
      <li class="vendor-card">

        <div class="vendor-info">
          <h4 class="vendor-name">{labels.highpoint.name}</h4>
          <span class="vendor-label">{labels.highpoint.sub}</span>
          <p class="vendor-desc">{labels.highpoint.desc}</p>
        </div>

        <a
          href={affiliate.highpointscientific}
          target="_blank"
          rel="noopener noreferrer"
          class="vendor-button"
        >
          {labels.highpoint.button}
        </a>
      </li>
    )}

    {affiliate.astroshop && (
      <li class="vendor-card">

        <div class="vendor-info">
          <h4 class="vendor-name">{labels.astroshop.name}</h4>
          <span class="vendor-label">{labels.astroshop.sub}</span>
          <p class="vendor-desc">{labels.astroshop.desc}</p>
        </div>

        <a
          href={affiliate.astroshop}
          target="_blank"
          rel="noopener noreferrer"
          class="vendor-button"
        >
          {labels.astroshop.button}
        </a>
      </li>
    )}

  </ul>

</section>
)}