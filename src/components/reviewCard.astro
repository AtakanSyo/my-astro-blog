---
/**
 * ReviewCard.astro
 * Review card: title + desc + Review badge + score badge + affiliate buttons.
 *
 * Props:
 * - url: string
 * - title: string
 * - description: string
 * - scoreText: string | number (e.g. 8.5)
 * - hue: number (for your --h CSS var)
 * - affiliates: Array<[name: string, link: string]>
 * - ctaText: string (optional, defaults to "Read the review →")
 * - class: string (optional extra classes)
 */

const {
  url = "#",
  title = "",
  description = "",
  scoreText,
  hue = 0,
  affiliates = [],
  ctaText = "Read review →",
  class: extraClass = "",
} = Astro.props;

const affs = Array.isArray(affiliates) ? affiliates : [];

import '../styles/cards.css';
import '../styles/reviewCard.css';
---

<div class="post-card post-card--review">
  <a href={url} class="post-card-link">
    <div class="post-card-info">
    <div class="post-card-title">{title}</div>

    {description && <p class="post-card-desc">{description}</p>}

    <div class="post-card-footer has-badge">
      <div class="post-card-badges">
        <span class="review-badge">Review</span>

        {scoreText !== undefined && scoreText !== null && scoreText !== "" && (
          <span class="score-badge" style={`--h:${hue}`}>
            {scoreText}/10
          </span>
        )}
      </div>
      <div class="read-post">{ctaText}</div>
    </div>
  </div>
  </a>
  <div class="affiliate-links">
    {affs.length > 0 ? (
      affs.map(([name, link]) => (
        <a
          href={link}
          class="affiliate-btn"
          target="_blank"
          rel="noopener noreferrer"
        >
          Check on {name}
        </a>
      ))
    ) : (
      <span class="affiliate-placeholder"></span>
    )}
    </div>
</div>